# Squid 说明

Squid是一个历史十分悠久项目，可以提供缓存和代理服务。目前常用的缓存服务有：`squid` `varnish` `nginx` `ats` 等，其中`varnish`是主要提供内存缓存，nginx通常提供代理功能。

Squid是一个高性能的代理和缓存服务器，支持FTP、Gopher和HTTP协议。它使用一个单独的、非模块化的、IO驱动的进程来处理所有的客户端请求。

Squid将数据元缓存在内存和硬盘中，同时也缓存DNS查询的结果。Squid支持SSL、支持访问控制。由于使用ICP(轻量Internet缓存协议)，Squid能够实现层叠的代理阵列，从而最大限度的节约带宽。

国内基本上90%以上的商业CDN公司，比如蓝汛、网宿、帝联等都在使用Squid。

官方网址：http://www.squid-cache.org/



## 缓存命中相关概念

cache命中：在缓存服务器中找到了用户请求的资源，就叫做cache命中。一个相关的指标是cache命中率，可以通过以下方式提高cache命中率：

- 页面动静分离，静态页面可以进行缓存

- 页面静态化，把动态页面保存为静态页面

- `apache nginx` 中为请求头添加`expires cache-control` 等字段，控制资源的有效期

  

cache丢失：也就是cache未命中的情况，导致cache未命中的原因分为以下几种

- 首次未命中， 可以通过资源预热、预取等机制提高资源的首次命中率
- 缓存资源过期，可以通过加大内存和磁盘、延长过期时间、提高热点资源限制、资源分类缓存等机制解决
- 特定情况下的资源不可达，通过源服务器控制解决



cache确认：一致性确认，也就是确保返回给用户的是最新的数据。主要由以下几种常用机制：

- CDN中不提供更新功能，也就是只能先删除，然后重新上线
- CDN中提供接口删除缓存，在源服务器资源删除时，同步删除CDN资源
- CDN中提供接口把新资源推送到CDN，在源服务器添加资源时，推送到CDN服务器























